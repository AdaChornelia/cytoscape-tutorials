<section>
    <h1>Basic Data Visualization</h1>
    <p><highlight>Cytoscape is an open source software platform for integrating, visualizing, and analyzing measurement data in the context of networks.</highlight></p>

    <p>This tutorial presents a scenario of how expression and network data can be combined to tell a biological story and includes these concepts:</p>
        <ul>
            <li>Visualizing networks using expression data.</li>
            <li>Filtering networks based on expression data.</li>
            <li>Assessing expression data in the context of a biological network.</li>
        </ul>
<!--
<div class="cybrowser">
    <p>The tutorial is designed to run as a demo in the CyBrowser app, with interactive buttons for each task.</p>
</div>
-->
<div class="footer" style="position: absolute; left: -3em; bottom: -4em; ">
<img class="plain" src="../assets/images/Cytoscape.png" style="height:70px;opacity:0.5"> 
<version>3.6.1</version></div>
</section>

<section>
	<h3>Loading Network</h3>
    			<ul>
				<div style="width:40%;float:right; margin-left: 10px">
					<img src="BasicDataVizDemoLoaded.png">
				</div>
				<li>Start Cytoscape and download the <a href="http://nrnb.org/data/BasicDataVizDemo.cys">demo network</a>.</li>
				<li>Open the demo network using <highlight>File &rarr; Open...</highlight>.</li>
                <li>To see node labels, select <highlight>View &rarr; Show Graphics Details</highlight>.</li>
				<li>You should now see the network on the right.</li>
			</ul>
    
		<!--<div class="cybrowser">
			<ul>
				<div style="width:40%;float:right; margin-left: 10px">
					<img src="BasicDataVizDemoLoaded.png">
				</div>
				<li>Start Cytoscape and load the demo session.</li>

				<input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('network load url url=https://raw.githubusercontent.com/cytoscape/cytoscape-tutorials/gh-pages/protocols/data/BasicDataVizDemo.xgmml');" value="Load network"/>
				<li>When the network first opens, the entire network is not visible because of the default zoom factor used. To see the whole network, we can use the <b>Fit Content</b> function.</li>
				<input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('view fit content');" value="Fit content"/>
									
				<li>You should now see the network on the right.</li>
			</ul>
		</div>-->

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>


	<section>
		<h3>Visualizing Expression Data on Networks</h3>
		<p>Probably the most common use of expression data in Cytoscape is to set the visual properties of the nodes in a network according to expression data. This creates a powerful visualization, portraying functional relation and experimental response at the same time. Here, we will show an example of doing this.</p>
		<p>The data used in this example is from yeast, and the genes <b>Gal1</b>, <b>Gal4</b>, and <b>Gal80</b> are all yeast transcription factors. The experiments all involve some perturbation of these transcription factor genes.
            
		<aside class="notes" data-markdown>
Add speaker notes here...
		</aside>
	</section>

    
	<section>
        <p>The experimental data is visible in the Node Table:</p><br />
		<ul>
			<img plain src="modules/loading-omics-data/Galbrowse3.png" style="width:80%"><br /><br />
			<li>Selecting one or more nodes in the network will update the table to show only the corresponding row(s)</li>
            <li>You can select nodes in the network by <highlight>Shift + Click and Drag</highlight> or by <highlight>Shift + clicking on multiple nodes</highlight></li>
        
		</ul>
		<p>To learn more about <b>importing data</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/modules/loading-omics-data/#/" target="_blank">Loading Omics Data Tutorial</a>.</p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

    <section>
		<p>We are going to map the following node attributes to visual style properties:</p>
		<ul>
			<li>The "gal80Rexp" expression values will be mapped to node color</li>
			<li>Node border width will be mapped to significance for expression values</li>
		</ul>
	</section>

        <section>
	<h3>Set Node Fill Color</h3>
    <ul>
    <li>Click on the <highlight>Style</highlight> tab in the <highlight>Control Panel</highlight>.</li>
    <li>Find <highlight>Fill Color</highlight> in the list of properties and expand it to view the mapping options.</li>
	<li>Click the <highlight>-- select value --</highlight> cell in the <highlight>Column</highlight> section, and select "gal80Rexp" in the drop-down.</li>
	<li>Click the <highlight>-- select value--</highlight> cell in the <highlight>Mapping Type</highlight> section, and select <highlight>Continuous Mapping</highlight> in the drop-down.</li>
    <li>This produces a default gradient ranging from blue to red. Let's keep this as our node fill color.</li>
    </ul><br /><br />
        <img src="../protocols/modules/basic-data-visualization/NodeFillMapping.png" style="width:40%">
        <aside class="notes" data-markdown>
            Add speaker notes here...
        </aside>
    </section>

     <section>
	<h3>Set Default Node Color</h3>
	<p>Note that the default node color of pale blue falls within this spectrum. A useful trick is to choose a color outside this spectrum to distinguish nodes with no defined expression value and those with slight repression.</p>
    <ul>
	<li>Click the <highlight>Def.</highlight> (leftmost) square next to <highlight>Fill Color</highlight> and choose a dark gray color.</li>
    </ul>
        <img src="../protocols/modules/basic-data-visualization/StyledNetwork1.png" style="width:40%">
         <!--<div class="cybrowser">
    <input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('node set properties nodeList=all propertyList=&quot;fill color&quot; valueList=&quot;#999999&quot;');" value="Change default node color"/></div> Doesn't work as a button or in command line dialog-->
         <aside class="notes" data-markdown>
             Add speaker notes here...
         </aside>
    </section>

    <section>
    <h3>Set Node Border Width</h3>
        <ul>
            <li>Click on the middle square (<highlight>Map.</highlight>) next to the <highlight>Border Width</highlight> row in the <highlight>Styles</highlight> panel.</li>
            <li>Click the <highlight>-- select value --</highlight> cell in the <highlight>Column</highlight> section, and select "gal80Rsig" in the drop-down.</li>
            <li>Click the <highlight>-- select value--</highlight> cell in the <b>Mapping Type</b> section, and select <b>Continuous Mapping</b> in the drop-down.</li>
            <li>Double-click on the default gradient.</li>
            <img src="NodeBorderGradient.png" style="width:35%">
            <li>Click on <b>Set Min and Max...</b> and set the max to "0.05". Click OK to save.</li>
            <li>The range is now set for only significant p values (0 - 0.05). Click on the handle (triangle) for the max value and set the value to 10 in the <highlight>Node Border Width</highlight> field.</li>
        </ul><br /><br />
        <p>To learn more about <b>visualizing data</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/modules/mapping-data/#/" target="_blank">Visualizing Expression Data Tutorial</a>.</p>
        
    </section>

	<section>
    <h3>Layouts</h3>
        <ul>
                <li>Let's change the layout to <b>Degree Sorted Circle Layout</b> by selecting <highlight>Layout &rarr; Degree Sorted Circle Layout</highlight>. In this layout, the highest degree node is at the 6 o'clock position, and remaining nodes are sorted counter clock-wise based on degree.</li>
                <li>We can now change the layout to a force-directed layout instead, which will work better with this network.
                An easy way to apply the <b>Prefuse Force-directed Layout</b> is by clicking the <highlight>Preferred Layout</highlight> <img src="PreferredLayoutButton.png"> in the toolbar. The preferred layout algorithm can be changed under <highlight>Layout &rarr; Settings...</highlight>.</li> 
        </ul>
        
<!--			<div class="cybrowser">
                <ul>
                <li>By default, the "Prefuse Force Directed Layout" is applied to organize the layout of the nodes.</li>
                <li>Let's change the layout to Circular Layout.</li>
				<input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('layout circular');" value="Apply Circular Layout"/>
                </ul>
			</div>-->


<!--<img plain src="Galfiltered-Edge-Weighted.png" style="width:40%">-->
		<p>Cytoscape supports many different layout algorithms, described in detail in the 
		<a href="http://manual.cytoscape.org/en/stable/Navigation_and_Layout.html?highlight=layout#automatic-layout-algorithms" target="_blank">Cytoscape manual</a>. </p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

	<section>
		<h3>Select Nodes</h3>
        <p>Next, lets select a subset of nodes with high expression in the gal80 knockout:</p>
				<ul>
					<li>Go to the <highlight>Select</highlight> tab in the Cytoscape Control Panel (the leftmost panel).</li>
					<li>Click on the <highlight>+</highlight> and create a <highlight>Column Filter</highlight>.</li>
					<li>Click on <highlight>Choose column...</highlight> and select <highlight>Node: gal80Rexp</highlight></li>
					<li>Using the slider, specify values of <b>2</b> or higher by changing the minimum value to 2.</li>
				</ul>
			<p>You should now see a few nodes in the network selected.</p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

	<section>	
        <p>Now we can expand the selection of nodes:</p>
        <ul>
            <li>Select the first neighbors of selected nodes by clicking the <highlight>First Neighbors of Selected Nodes (undirected)</highlight> button <img src="FirstNeighborsButton.png"> in the toolbar.</li>
            <li>Create a new network from the current selection by clicking the <highlight>New Network From Selection (all edges)</highlight> button <img src="NewNetworkFromSelectionButton.png"> in the toolbar.</li>
            <li>Click on the <highlight>Preferred Layout</highlight> button <img src="PreferredLayoutButton.png"> in the toolbar to apply a force-directed layout.</li> 
                
        </ul>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

<section>
    <p>The new network should now look like this:</p>
    <img src="../protocols/modules/basic-data-visualization/FinalNetwork.png" style="width:45%">
</section>

<section>
	<h3>Exploring Nodes</h3>
	<ul>
		<li>Right-click on any node (for example GAL4).</li>
		<li>Select the menu <highlight>External Links → Sequences and Proteins → Ensembl Gene View → yeast</highlight>.</li>
		<li>This action will pop-up a browser window and search the Ensembl database for the term "YPL248C", the name of the node.</li>
	</ul>
	<aside class="notes" data-markdown>
	Add speaker notes here...
	</aside>
</section>

<section>
	<p>Digging into the biology of this network, it turns out that GAL4 is repressed by GAL80. Both nodes (GAL4 and GAL11) show fairly small changes in expression, and neither change is statistically significant: they are pale blue with thin borders. These slight changes in expression suggest that the critical change affecting the red nodes might be somewhere else in the network, and not either of these nodes.
	GAL4 interacts with GAL80, which shows a significant level of repression: it is medium blue with a thicker border.
	<p>Note that while GAL80 shows evidence of significant repression, most nodes interacting with GAL4 show significant levels of induction: they are rendered as red rectangles.
	GAL11 is a general transcription co-factor with many interactions.</p>
	<p>Putting all of this together, we see that the transcriptional activation activity of Gal4 is repressed by Gal80. So, repression of Gal80 increases the transcriptional activation activity of Gal4. Even though the expression of Gal4 itself did not change much, the Gal4 transcripts were much more likely to be active transcription factors when Gal80 was repressed. This explains why there is so much up-regulation in the vicinity of Gal4.</p>
</section>

<section>
    <h3>Summary</h3>
    <p>In summary, we have explored a yeast interactome from a transcription factor knockout experiment. We created a visual style using expression value as node color and with border width mapped to significance. We selected high expressing genes and their neighbors and created a new network. We can now export this network as a publication-quality image....</p>
	<aside class="notes" data-markdown>
	Add speaker notes here...
	</aside>
</section>

<section>
	<h3>Saving Results</h3>
    <p>Cytoscape provides a number of ways to save results and visualizations:</p>
	<ul>
                    <li>As an image: <highlight>File&rarr;Export as Image...</highlight></li>
					<li>As a session: <highlight>File&rarr;Save</highlight>, <highlight>File&rarr;Save As...</highlight></li>
                    <li>To the web: <highlight>File&rarr;Export as Web Page...</highlight> (<a href="modules/saving-results/web_session/index.html" target="_blank">Example</a>)</li>
		          <li>To a public repository: <highlight>File&rarr;Export&rarr;Network Collection to NDEx</highlight></li>
		              <li>As a graph format file: <highlight>File&rarr;Export&rarr;Network</highlight>. <br/>Formats:
						<ul>
										<li>CX JSON</li>
										<li>Cytoscape.js JSON</li>
										<li>GraphML</li>
										<li>PSI-MI</li>
										<li>XGMML</li>
										<li>SIF</li>
                        </ul></li>
	</ul>
</section>
