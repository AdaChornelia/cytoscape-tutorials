<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Affinity purification-mass spectrometry network analysis</title>

		<link rel="stylesheet" href="../../css/reveal.css">
		<link rel="stylesheet" href="../../css/theme/cytoscape-protocol-1.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<!-- ========================================================== -->
<!-- THIS IS WHERE YOUR CONTENT BEGINS -->

<section>
	<h1>Affinity purification-mass spectrometry network analysis</h1>
	<p>This protocol describes how to use affinity purification-mass spectrometry data to to generate relevant interaction networks, enriching the networks with information from public resources, analyzing the networks and creating effective visualizations.</p>
</section>
                
<section>
    <h1>Background</h1>
    <p>The data used for this protocol represents interactions between the host and HIV proteins by <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3310911/">JÃ¤ger et al</a>. In this quantitative AP-MS experiment, a relatively small number of bait proteins are used to pull down a larger set of prey proteins.</p>
    <p>Note that this tutorial does not describe how to pre-process the raw AP-MS data, the data used here is already scored and filtered.</p>
                
</section>

<section>
    <h1>Setup</h1>
    <ul>
    <li>Install and launch the latest version of <a href="http://www.cytoscape.org/">Cytoscape</a>.</li>
    <li>Install the following apps: <a href="http://apps.cytoscape.org/apps/stringapp" target="_blank">STRINGapp</a>, <a href="http://apps.cytoscape.org/apps/enhancedgraphics">enhancedGraphics</a> and <a href="http://apps.cytoscape.org/apps/clustermaker2">clusterMaker2</a>. This can be done from the Cytoscape App Store, or from Cytoscape via <highlight>Apps &rarr; App Manager ...</highlight></li>
    </ul>
</section>
                
<section>
    <h1>Import Network and Data</h1>
    <ul>
        
        <li>Load the network via <highlight>File &rarr; Import &rarr; Network from File....</highlight>, and select the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/data/nprot.2014.164-S2.csv">Example data</a>.</li>	
        <li>In the <highlight>Import Network from Table</highlight> dialog, select the <highlight>Bait</highlight> column as <highlight>Source  Node</highlight> and <highlight>Prey</highlight> column as <highlight>Target Node</highlight>.</li>
        <li>Designate the <highlight>ScoreAverage</highlight> as an <highlight>Edge Attribute</highlight>.</li>
        <li>For all other data values, change the assignment to <highlight>Target Node Attribute</highlight>. This can be done by clicking in the column header and selecting the red spreadsheet icon.</li>
        <li>Click <highlight>OK</highlight> to import the network.</li>
    </ul>
    <img class="plain" src="import-network.png" style="height:400px">
</section>
                            
<!--<section>
    Note: not sure we need this slide
    <h1>Mapping Identifiers</h1>
    <p>We now have a network of HIV proteins (bait) interacting with human proteins (prey). The human proteins are annotated with Entrez Gene IDs, but we need Ensembl IDs. We are going to use Cytoscape's built-in <highlight>ID Mapper</highlight> functionality to map Entrez-Ensembl in one step:</p>
    <ul>
        <li>Right-click on the header for the <highlight>Gene ID</highlight> column and select <highlight>Map column...</highlight></li>
        <li>Set <highlight>Map from</highlight> to <highlight>Entrez</highlight> and <highlight>To</highlight> to <highlight>Ensembl</highlight>.</li>
    </ul> <br /><br />
    <img class="plain" src="id-mapper.png" style="height:300px">
</section>-->
                
<section>
    <h1>Enriching Network with Existing Protein-protein Interaction Data</h1>
    <p>We are going to use existing protein-protein interaction data to enrich the network, using the <a href="https://string-db.org/">STRING database</a> with the human protein nodes as input.</p>
    
    <ul>
        <li>In the <highlight>Node Table</highlight>, sort the table for your network by the <highlight>Gene ID</highlight> column by clicking on the header once. This will sort for the human protein nodes, which are the ones with entries for <highlight>Gene ID</highlight>.</li>
        <li>Select all the relevant entries in the <highlight>Gene Symbol</highlight> column by selecting the top item, then scroll down and hold down <b>Shift</b> and then selecting the last entry. Click <highlight>Ctrl+C</highlight> to copy.</li>
        <li>Paste the list of gene symbols into the <highlight>Network Search</highlight> at the top of the <highlight>Control Panel</highlight>. Select <highlight>String Protein</highlight> from the drop-down.</li>
        <li>Click the search icon <img class="plain" src="SearchIcon.png" style="height:30px"> to search. The resulting network will load automatically.</li>
    </ul>
<!--    Note: String search has ambigous results that need to be resolved.-->
    
</section>
                
<section>
    <h1>Enriching network with existing protein-protein interaction data</h1>
    <p>The resulting network contains known interactions between the human proteins, with an evidence score of 0.4 or greater.</p>
    <img class="plain" src="string.png" style="height:500px">
</section>
                
<section>
    <h1>Merge Networks</h1>
    <p>To incorprate the new information into our AP-MS network, we need merge the STRING and AP-MS networks. We can use the Uniprot IDs available in both networks as the mathcing attribute.</p>
    <ul>
    
        <li>Go to <highlight>Tools &rarr; Merge &rarr; Networks...</highlight></li>
        <li>In the <highlight>Available Networks</highlight> list, select both networks and click the right arrow to add then to the <highlight>Networks to Merge</highlight> list.</li>
        <li>Expand the <highlight>Advanced Options</highlight> interface.</li>
        <li>In the <highlight>Matching Columns</highlight> field, select <highlight>name</highlight> for the AP-MS network and <highlight>canonical name</highlight> for the string network.</li>
    </ul>
    <img class="plain" src="merge-interface.png" style="height:450px">
</section>
                
<section>
    <h1>Merge Networks</h1>
        <img class="plain" src="merged-network.png" style="height:600px">
                
</section>
                
<section>
    <h1>Network Visualization</h1>
    <p>Before we continue, let's change the style of the network a bit.</p>
    <ul>
        <img class="plain" src="ap-ms-style.png" style="float:right;height:550px">
        <li>In the <highlight>Style</highlight> tab of the <highlight>Control Panel</highlight>, click the <highlight>Options</highlight> menu and select <highlight>Create New Style...</highlight>. Name the style <b>AP-MS</b>.</li>
        <li>In the <highlight>Style</highlight> tab of the <highlight>Control Panel</highlight>, set the default node <highlight>Shape</highlight> to oval.</li>
        <li>Set the node <highlight>Size</highlight> to 50.</li>
        <li>Check the <highlight>Lock node width and height</highlight>.</li>
        <li>Set the default node <highlight>Fill Color</highlight> to light grey.</li>
        <li>Set the node <highlight>Label</highlight> to <highlight>display name</highlight>.</li>
    </ul>
    
</section>
                
<!--<section>
    <h1>Filter network</h1>
    <p>Let's filter the network to remove some nodes we don't want.</p>
    <ul>
    <li>Click on the <highlight>Select</highlight> tab of the <highlight>Control Panel</highlight>.</li>
    <li>Because the network is large, uncheck <highligth>Apply when filter changes</highligth> at the bottom of the panel.</li>
    <li>Click the <highlight>+</highlight> (add) button and select <highlight>Column Filter</highlight>.</li>
    <li>In the <highlight>Choose column...</highlight> drop-down, select <highlight>JurkatScore</highlight>. <li>In the selection slider, select scores between 0 and 1, i.e. all numeric score. This will exclude any node with no Jurkat score.</li>
    </ul>
</section>-->
                
<section>
    <h1>Enrichment Analysis</h1>
    <p>Now that we have a merged network, we can do enrichment analysis on it, using the STRING enrichment tool.</p>
    <ul>
        <li>First, designate the merged network as a STRING network by selecting <highlight>Apps &rarr; STRING &rarr; Set as STRING network</highlight>.</li>
        <li>Next, click <highlight>Apps &rarr; STRING &rarr; Retreive functional enrichment</highlight>. Use the default value (0.05) for <highlight>Enrichment FDR value cutoff</highlight>.</li>
        <li>When the enrichment analysis is complete, a new tab titled <highlight>STRING Enrichment</highlight> will open in the <highlight>Table Panel</highlight>.</li>
    </ul>
    
</section>
                
                
<section>
    <h1>Enrichment Analysis</h1>
    <p>The STRING app includes several options for filtering and displaying the enrichment results. The features are all available at the top of the <highlight>STRING Enrichment</highlight> tab.</p>    
    <ul>
        <li>We are going to filter the table to only show GO Process. At the top left of the STRING enrichment tab, click the filter icon <img class="plain" src="FilterIcon.png" style="height:30px">. Select <highlight>GO Process</highlight> and check the <highlight>Remove redundant terms</highlight> check-box. Then click OK.</li>
        <li>Next, we will add a split donut chart to the nodes representing the top terms by clicking on <img class="plain" src="ChartIcon.png" style="height:30px">.</li>
	   <li>Explore custom setting via <img class="plain" src="SettingsIcon.png" style="height:30px"> in the top right of the STRING enrichment tab.</li>
    </ul>
    <img class="plain" src="enrichment.png" style="height:400px">
</section>
    
<section>
    <h1>Network Topological Analysis</h1>
    <p></p>
    <ul>
        <li>Select <highlight>Tools &rarr; Network Analyzer &rarr; Network Analysis &rarr; Analyze network...</highlight></li>
        <li>The results will open as a set of tabs in the <highlight>Results Panel</highlight> and new attributes will be created for node degree, closeness centrality, betweenness centrality, stress, and a number of other useful measures</li>
    </ul>
</section>
                
<!--<section>
    <h1>Clustering</h1>
    <p></p>
</section>
    
    

    
<section>
    <h1>Visualizing results</h1>
                
</section>  -->

<!-- THIS IS WHERE YOUR CONTENT ENDS -->
<!-- ========================================================== -->

			</div>
		</div>

		<script src="../../lib/js/head.min.js"></script>
		<script src="../../js/reveal.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-155159-15', 'auto');
  ga('send', 'pageview');

</script>
<script>
	Reveal.addEventListener( 'ready', function() {
	if(!window.navigator.userAgent.includes('CyBrowser')){
		var divs = document.getElementsByClassName("cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	} else {
		var divs = document.getElementsByClassName("not-cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	}
});
</script>  
		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				controls: true,
				progress: true,
				slideNumber: false,
				touch: true,
				fragments: true,
				help: true,
				showNotes: false,
				previewLinks: false,
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				width: 1200,
				height: 860,
				autoSlide: 0,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
				{ src: '../../plugin/markdown/marked.js' },
				{ src: '../../plugin/markdown/markdown.js' },
				{ src: '../../plugin/zoom-js/zoom.js', async: true, condition: function(){ return !!document.body.classList; } },
				{ src: '../../plugin/notes/notes.js', async: true },
				{ src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: '../../plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } }
				]
				});
			</script>
		</body>
	</html>
